# Settings in the [build] context are global and are applied to all contexts
# unless otherwise overridden by more specific contexts.
[build]
  # Directory to change to before starting a build.
  # This is where we will look for package.json/.nvmrc/etc.
  # If not set, defaults to the root directory.
  base = "/"

  # Directory that contains the deploy-ready HTML files and assets generated by
  # the build. This is relative to the base directory if one has been set, or the
  # root directory if a base has not been set. This sample publishes the
  # directory located at the absolute path "root/project/build-output"
  publish = "public/"

  # Default build command.
  command = "hugo"

[[plugins]]
  package = "@algolia/netlify-plugin-crawler"

    [plugins.inputs]
    branches = ['main']
    disabled = true
    pathPrefix = "/posts"
    customDomain = "www.mcmk.in"
    renderJavaScript = true

[[plugins]]
  package = "netlify-plugin-generate-pdf"
  [plugins.inputs]
  url="https://cranky-poincare-61f551.netlify.app/docs/cv/"
  fileName = "docs/cv/james.mcmeeking.pdf"
  [plugins.inputs.margin]
    top = '1cm'
    right = '0cm'
    bottom = '1cm'
    left = '0cm'

[[headers]]
  for = "/*"
  [headers.values]
    X-Content-Type-Options = "nosniff"
    X-Frame-Options = "SAMEORIGIN"
    X-XSS-Protection = "1; mode=block"
    Strict-Transport-Security = "max-age=63115200; includeSubDomains; preload"
    Referrer-Policy = "no-referrer, strict-origin-when-cross-origin"
    Cross-Origin-Resource-Policy = "same-origin"
    Content-Security-Policy = """
      default-src 'none';
      script-src 'self' https://utteranc.es/client.js
        'sha256-CYXEZK36Ezs8CzmzN55CswoKW0GqxT3ROiF0Jdty9NM='
        'sha256-Im75eFACfZktxSKo/DOTa3L9fqO2ITcvduLbJsjVvyM='
        'sha256-xJ8Q6L3OjE4Xj5stFYsZKrqcZyWlyryRF8J8oXThvsI='
        'sha256-pepoXUTqW6HuN6BxwysJb3DbHQM7l2OiH5LLjaJisXI=';
      style-src 'self' https://fonts.googleapis.com
        'sha256-9HupEqQsOKAA3TMVtaZh8USULhFpwYGuWFk+44sVSgg='
        'sha256-qVAVKIfmhvbHWP2+zaUdU7vpYMNeO+YwWkd6d9Kw2nY=';
      object-src 'self';
      base-uri 'self';
      connect-src 'self' https://*.algolia.net;
      font-src 'self' https://fonts.gstatic.com;
      frame-src 'self' https://utteranc.es;
      img-src 'self' https://www.gravatar.com https://app.fossa.io https://img.shields.io;
      manifest-src 'self';
      media-src 'self';
      report-uri https://mcmeeking.report-uri.com/r/d/csp/enforce;
      worker-src 'self';
    """

# Production context: all deploys from the Production branch set in your siteâ€™s
# Branches settings in the UI will inherit these settings.
[context.production]
  publish = "public/"
  